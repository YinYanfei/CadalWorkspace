package cn.cadal.rec.algo.tags;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;

public class DimOp {

	private String fileDir = "E:/Recommendation/Tags/dim.info.dat";
	private String destin = "E:/Recommendation/Tags/dim.info.op.dat";

	/**
	 * Construct functions
	 */
	public DimOp(){
	}
	public DimOp(String fileDir, String destin){
		this.fileDir = fileDir;
		this.destin =destin;
	}
	
	/**
	 * 01025185 [10030]综合性学术文献$[7601530]音乐表演艺术$[9902040]小说$ => 01025185 综合性学术文献$音乐表演艺术$小说$
	 */
	public void Tidy(){
		File file = new File(this.fileDir);
		BufferedReader reader = null;
		FileWriter writer = null;
		
		try{
			reader = new BufferedReader(new FileReader(file));
			writer = new FileWriter(this.destin);
			
			String line = "";
			while((line = reader.readLine()) != null){
				String [] lineSplit = line.split(" ");
//				writer.write(lineSplit[0] + " ");
				String [] lineSplit_1_split = lineSplit[1].split("$");
				
				for(int i = 0; i < lineSplit_1_split.length; ++i) {
					System.out.println(lineSplit_1_split[i].substring(lineSplit_1_split[i].indexOf("]") + 1));
//					writer.write(lineSplit_1_split[i].substring(lineSplit_1_split[i].indexOf("]") + 1) + "$");
				}
				
				writer.write("\n");
			}
			
			reader.close();
			writer.close();
		}catch(Exception e) {
			e.printStackTrace();
		}finally{
			try{
				if(reader != null)
					reader.close();
				if(writer != null) 
					writer.close();
			}catch(Exception e) {
				e.printStackTrace();
			}
		}
	}
	
	
	
	/**
	 * @param args
	 */
	public static void main(String[] args) {
		// Test and Analyze
		DimOp dimOp = new DimOp();
		
		dimOp.Tidy();
	}

}
